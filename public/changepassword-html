<!DOCTYPE html>
<html>
<head>
  <title>Change Password</title>
</head>
<body>

  <h2>üîê Change Your Password</h2>
  <form id="changePasswordForm">
    <input type="password" placeholder="Current Password" required id="currentPassword" />
    <input type="password" placeholder="New Password" required id="newPassword" />
    <button type="submit">Change Password</button>
  </form>

  <script>
    document.getElementById('changePasswordForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const token = localStorage.getItem('token');

      const res = await fetch('/api/change-password', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`
        },
        body: JSON.stringify({ currentPassword, newPassword })
      });

      const data = await res.json();

      if (res.ok) {
        alert("‚úÖ Password changed successfully!");
        window.location.href = '/dashboard.html';
      } else {
        alert("‚ùå " + data.message);
      }
    });
  </script>

</body>
</html>
